# Jules Agent Guidelines (AGENTS.md)

このドキュメントは、このリポジトリ（VS Code拡張機能）で作業するAIエージェントのための包括的なガイドラインです。最高の品質と整合性を保つため、以下のルールを厳守してください。

## 1. 言語とコミュニケーション (Language & Communication)

このプロジェクトでは、コンテキストに応じて使用する言語が厳密に定義されています。

*   **GitHub上のやり取り (PR, Issues, Comments):**
    *   **全て日本語**を使用してください。
    *   PRのタイトル、説明（Description）、コミットメッセージ、コードレビューへの返信など、開発プロセスにおけるコミュニケーションは日本語で行います。
*   **コード内のコメントとテスト記述:**
    *   ソースコードのコメント、テストの記述（`describe`, `test` の名前など）は**日本語**を使用してください。これにより、開発意図を明確に伝えます。
*   **ユーザー向けの表示 (UI, Messages, Logs):**
    *   **全て英語 (English)** を使用してください。
    *   VS CodeのUI要素（コマンドパレット、通知、エラーメッセージ、Webview、ログ出力）は、国際的なユーザーベースを想定して英語で記述します。
    *   `package.json` の `displayName` や `description` も英語です。

## 2. 開発ワークフロー (Development Workflow)

1.  **計画 (Planning):**
    *   作業を開始する前に、必ず `set_plan` を使用して具体的なステップを定義してください。
    *   リポジトリの探索 (`list_files`, `read_file`) を十分に行い、コンテキストを理解してから計画を立ててください。
2.  **検証 (Verification):**
    *   コードを変更した後は、必ずその変更が正しく適用されたことを確認してください（`read_file` 等）。
    *   「変更したはず」という推測で進めず、事実を確認してください。
3.  **成果物 (Artifacts):**
    *   `out/` や `dist/` などのビルド成果物を直接編集しないでください。必ず `src/` 配下のソースコードを編集し、ビルドコマンドを実行してください。

## 3. コーディング規約 (Coding Standards)

*   **TypeScript:**
    *   厳密な型チェックを行います。`any` 型の使用は避けてください。
    *   変更後は `npm run check-types` (`tsc --noEmit`) を実行し、型エラーがないことを確認してください。
*   **Linting:**
    *   `npm run lint` を実行し、リンターのエラーや警告を修正してください。
*   **スタイル:**
    *   既存のコードベースのスタイル（インデント、命名規則）に従ってください。

## 4. テスト (Testing)

*   **ユニットテスト推奨:**
    *   開発環境の制限により、統合テスト（`npm test`）よりもユニットテスト（`npm run test:unit`）を優先してください。
    *   新しい機能を追加する場合やバグを修正する場合は、必ず再現テストや回帰テストを作成してください。
*   **テストの実行:**
    *   テストファイルは `src/test/` に配置します。
    *   実行コマンド: `npm run test:unit`（または特定のファイルをコンパイルして実行）。
    *   VS Code APIに依存するコードをテストする場合は、`src/test/vscodeMock.ts` 等を使用して適切にモックしてください。詳細な手順は `TESTING_GUIDE.md` を参照してください。

## 5. セキュリティ (Security)

*   **Sentinel:**
    *   セキュリティに関連する重要な学習事項や脆弱性パターンは `.jules/sentinel.md` に記録されています。これを確認し、同様の問題を防いでください。
*   **入力検証:**
    *   ユーザー入力や外部からのデータは必ずサニタイズ・検証してください。
    *   APIキーやトークンなどの機密情報をログに出力しないよう注意してください。

## 6. コミットとPR (Commit & PR)

*   **PRの作成:**
    *   PRのタイトルと説明は**日本語**で記述してください。
    *   変更の目的、内容、検証方法を明確に記載してください。
*   **承認:**
    *   `submit` ツールを使用する前に、必ず `pre_commit_instructions` を呼び出し、必要なチェックを行ってください。
